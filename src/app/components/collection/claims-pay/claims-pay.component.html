<div id="paymentWay">
    <div class="outerBorder outerItem py-3">
            <!-------------------- Search Policy ------------------->
            <div id="filters" style="display: none;">
                <p class="main_color fs-5 fw-bold py-2">{{'Shared.SearchHere'|translate}} :</p>
                <form [formGroup]="SearchForm">
                    <div class="row">
                        <div class="col-md-3">
                            <!-- <input type="text" class="form-control" style="font-family:'FontAwesome'!important;" placeholder="&#xf007;"> -->
                            <mat-form-field appearance="outline">
                                <mat-label>رقم التعويض</mat-label>
                                <!-- الحافظه دي زي رقم البوليصه بس دي للحاجات ال اتعمها ابروف -->
                                <input formControlName="claimCode" type="text" matInput>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                        class="fa-solid fa-hashtag"></i></mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field appearance="outline" id="bokerField">
                                <mat-label>{{'Offer.Broker'|translate}}</mat-label>
                                <mat-select [(value)]="BrokerIdVal">
                                    <mat-option value="">{{'Shared.Null'|translate}}</mat-option>
                                    <mat-option *ngFor="let type of brokerCustomers"
                                        [value]="type.id">{{type.name}}</mat-option>
                                </mat-select>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                        class="fa-solid fa-people-arrows"></i></mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field appearance="outline">
                                <mat-label>{{'Offer.Insured'|translate}}</mat-label>
                                <input formControlName="insuredName" type="text" matInput>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i class="fa-solid fa-hashtag"></i></mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field appearance="outline">  
                                <mat-label>Policy Code</mat-label>
                                <input formControlName="policyCode" type="text" matInput>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                    class="fa-solid fa-hashtag"></i></mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field appearance="outline">
                                <mat-label>{{'Policy.From'|translate}}</mat-label>
                                <input formControlName="from"  matInput [matDatepicker]="picker">
                                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field appearance="outline">
                                <mat-label>{{'Policy.To'|translate}}</mat-label>
                                <input formControlName="to" matInput [matDatepicker]="picker2">
                                <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-label>Payment status</mat-label>
                                <mat-select [(value)]="SatusVal">
                                    <mat-option value="" selected>All</mat-option>
                                    <mat-option value="1">Paid</mat-option>
                                    <mat-option value="2">UnPaid</mat-option>
                                </mat-select>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i class="fa-solid fa-money-bill"></i></mat-icon>
                            </mat-form-field>
                        </div>
    
                        <div class="col-md-2">
                            <!-- Search Now -->
                            <div class="d-flex justify-content-start mt-2">
                                <button id="searchBtn" [disabled]="this.isClicked" (click)="Search()" mat-raised-button
                                    class="tabeeb_Btn w-75 py-2"><span *ngIf="this.isClicked"><i
                                            class="fa-4 fa-solid fa-fan fa-spin"></i></span> <span
                                        *ngIf="!this.isClicked">{{'Shared.Search'|translate}} <i
                                            class="fa-solid fa-magnifying-glass"></i></span></button>
                            </div>
                        </div>
                    </div>
                </form>
                <hr class="my-4" style="width: 80%;margin: auto;">
            </div>


            <!-------------------- Search results ------------------->

            <div style="display: none;"  id="SearchResults"> 
                <p class="main_color fs-5 fw-bold py-2">{{'Shared.Searchresults'|translate}} <i class="fa-solid fa-square-poll-vertical"></i></p>
                <table class="table text-center table-responsive table-hover">
                    <thead class="tableHead">
                        <th class="py-2 chechBox">اختيار</th>
                        <th class="py-2">رقم التعويض</th>
                        <th class="py-2">موقف السداد</th>
                        <th class="py-2">العميـل</th>
                        <th class="py-2">اسم المنتج</th>
                        <th class="py-2">تواريخ السداد</th>
                        <th class="py-2">المبلغ المستحق</th>
                        <th class="py-2">اجمالي القسط المستحق</th>
                        <th class="py-2">تاريخ الإستحقاق</th>
                        <th class="py-2">رقـم الوثيقه</th>
                    </thead>
                    <tbody>
                        
                        <tr *ngFor="let Policy of AllClaims;let index= index">
                            <td class="align-middle HideCheck">
                                <span *ngIf="Policy.status=='UnPaid'"><mat-checkbox color="primary" (change)="getCheckedValues(Policy.collectionId,Policy.dueDate,Policy.installmentDue, $event.checked)" #CheckBox class="example-margin chechBox"></mat-checkbox></span>
                                <span *ngIf="Policy.status=='Paid'">_</span>
                            </td>
                            <td class="align-middle">{{Policy.claimCode}}</td>
                            <td class="align-middle">
                                <span *ngIf="Policy.status=='Paid'" class="text-danger fw-bold">
                                    {{Policy.status}} <mat-checkbox (change)="getUnDoPaymentId($event.checked,Policy.paymentId)" [(ngModel)]="unDo[Policy.paymentId]" class="example-margin chechBox" color="primary"></mat-checkbox>
                                </span>
                                <span *ngIf="Policy.status=='UnPaid'" class="text-primary fw-bold">{{Policy.status}}</span>
                            </td>
                            <td class="align-middle">{{Policy.insured}}</td>
                            <td class="align-middle">{{Policy.brokerName}} <span *ngIf="Policy.brokerName==''">_</span></td>
                            <td class="align-middle">
                                <i (click)="GetHistory(Policy.claimCode)" data-bs-toggle="modal" data-bs-target="#PaymentHistory" class="fa-regular fa-eye  fs-5 px-3 py-2" style="color: #01909d !important;"></i>
                            </td>
                            <!-- <td class="align-middle">{{Policy.remaining}}</td> -->
                            <!-- <td class="align-middle">
                                <mat-form-field style="margin-bottom:-1.7em;">
                                    <input type="number" (keyup)="checkIfAxceeded($event.target,inputPrice,index,CheckBox)" [max]="Policy.installmentDue" #inputPrice value="0"  matInput>
                                </mat-form-field>
                            </td> -->
                            <td class="align-middle">{{Policy.installmentDue}}</td>
                            <td class="align-middle">{{Policy.total}}</td>
                            <td class="align-middle">{{Policy.dueDate|date:'dd-MM-YYYY'}}</td>
                            <td class="align-middle">{{Policy.policyCode}}</td>
                            
        
                        </tr>
                    </tbody>
                </table>
                <!-- total Money-->
                  <!-- total Money-->
                <div class="row">
                    <div class="col-md-3">
                        <button [disabled]="isClicked2" *ngIf="this.UnDoPaymentId!=''" (click)="ChangeClaimsStatus()" class="w-100 btn search">
                            <span *ngIf="isClicked2"><i class="fa-solid fa-fan fa-spin"></i></span>
                            <span *ngIf="!isClicked2">Reset Payment </span>
                        </button>
                    </div>
                </div>
                <div class="row" *ngIf="this.ResponseIds.length != 0">
                    <div class="col-md-12">
                        <table class="table table-striped mt-2">
                            <tbody>
                                <tr>
                                    <th class="w-25 py-2"><span class="main_color">Total Mony</span> </th>
                                    <td class="w-75 py-2"><span class="main_color">{{this.TotalMony}}</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- <div class="col-md-6"></div> -->
                    <!-- <div class="col-md-2"> -->
                        <!-- <div style="display: none;" id="UploadFile">
                            <i (click)="fileGroupInput.click()" class="fa-solid fa-cloud-arrow-up fs-2 px-2 py-2" style="color:#3F51B5;border-radius: 5px;cursor: pointer;"></i>
                            <input accept=".xlsx" hidden (change)="uploadPaymnetFile($event)" #fileGroupInput type="file">
                            <span class="file-name">{{selectedFile?.name}}</span>
                        </div> -->
                    <!-- </div> -->
                </div>
                    <!-- <button (click)="UpdateClaim()" [disabled]="this.ArrTest.length==0" mat-raised-button color="primary" class="w-25">Save <i class="fa-regular fa-floppy-disk"></i></button> -->
                <!-- Loading -->
                <div id="loading" *ngIf="isClicked">
                    <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
                </div>
            </div>

            <!-------------------- Payment Way ------------------->

            <div id="PaymentWay" class="py-2" *ngIf="this.permissions.includes('Permissions.Claims.Payment')">
                <div class="container_custom">
                    <div class="row py-3">
                        <div class="col-md-3"></div>
                        <div class="col-md-5" id="PaymnetWays" *ngIf="this.ArrTest.length!=0">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-label>طريقه السداد</mat-label>
                                <mat-select (selectionChange)="getPaymentWay($event.value)">
                                    <mat-option [value]="3">شيــك</mat-option>
                                    <mat-option [value]="5">تحويل بنكـي</mat-option>    
                                    <mat-option [value]="6">أمــانه</mat-option>
                                </mat-select>
                                <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                        class="fa-solid fa-coins"></i></mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="display: none;" id="PaymentFile">
                            <!-- <div>
                                <i (click)="fileGroupInput.click()" class="fa-solid fa-cloud-arrow-up fs-2 px-2 py-2"
                                    style="color:#3F51B5;border-radius: 5px;cursor: pointer;"></i>
                                <input accept=".xlsx" hidden (change)="uploadPaymnetFile($event)" #fileGroupInput
                                    type="file">
                                <span class="file-name">{{selectedFile?.name}}</span>
                            </div> -->
                        </div>
                    </div>

                    <div id="Bodyy" style="display: none;">
                        <!-- شيــك -->
                        <form [formGroup]="CheckForm" id="Check" style="display: none;">
                            <div class="row">
                                <div class="col-md-6">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>رقم الشيـك</mat-label>
                                        <input formControlName="checkNumber" type="number" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-hashtag"></i></mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-6">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>اسم البنك المسحوب عليه</mat-label>
                                        <input formControlName="bankName" type="text" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-building-columns"></i></mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>مبلـغ الشيـك</mat-label>
                                        <input formControlName="amount" type="number" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-money-bills"></i></mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>تاريـخ الشيـك</mat-label>
                                        <input formControlName="paymentDate" [min]="this.CurrentDate" matInput [matDatepicker]="picker4">
                                        <mat-datepicker-toggle matIconSuffix
                                            [for]="picker4"></mat-datepicker-toggle>
                                        <mat-datepicker #picker4></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-4">
                                    <div class="col-md-2 d-flex justify-content-end">
                                        <button [disabled]="this.CheckForm.status=='INVALID'" (click)="viewCheck()"
                                            class="mt-2 btn search">{{'Shared.Add'|translate}}</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <!--  تحويل بنكي -->
                        <form [formGroup]="TrasferForm" id="BankTransfer" style="display: none;">
                            <div class="row">
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>رقـم التحويـل</mat-label>
                                        <input formControlName="transferNumber" type="number" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-hashtag"></i></mat-icon>
                                    </mat-form-field>
                                    
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>اسـم البنك</mat-label>
                                        <input formControlName="bankName" type="text" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-building-columns"></i></mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>مبلـغ التحويـل</mat-label>
                                        <input formControlName="amount" type="number" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-money-bills"></i></mat-icon>
                                    </mat-form-field>
                                    
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>التاريـخ </mat-label>
                                        <input formControlName="paymentDate" [min]="this.CurrentDate" matInput [matDatepicker]="picker8">
                                        <mat-datepicker-toggle matIconSuffix [for]="picker8"></mat-datepicker-toggle>
                                        <mat-datepicker #picker8></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-2 d-flex justify-content-end">
                                    <button [disabled]="this.TrasferForm.status=='INVALID'" (click)="viewTransfer()"
                                        class="mt-2 btn search">{{'Shared.Add'|translate}}</button>
                                </div>
                            </div>
                        </form>
                        <!-- أمــانه -->
                        <form [formGroup]="HonestyForm" id="Honesty" style="display: none;">
                            <div class="row" >
                                <div class="col-md-3">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>اسـم العميـل</mat-label>
                                        <mat-select formControlName="policyId">
                                            <mat-option *ngFor="let insured of this.ListInsuredNames" [value]="insured.policyId">{{insured.insuredName}}</mat-option>
                                        </mat-select>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-brands fa-osi"></i></mat-icon>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-3">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>المبلغ </mat-label>
                                        <input formControlName="amount" type="number" matInput>
                                        <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                                                class="fa-solid fa-money-bills"></i></mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3">
                                    <div class="d-flex justify-content-end">
                                        <button TrasferForm [disabled]="HonestyForm.status=='INVALID'" (click)="viewHonesty()"
                                            class="mt-2 btn search">{{'Shared.Add'|translate}}</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- /Table Check -->
                    <div class="outerBorder shadow_5" *ngIf="this.ArrCheck.length>0">
                        <p class="text-muted fs-5 fw-bold py-2">Table Of Check <i class="fa-solid fa-money-bills"></i>
                        </p>

                        <table class="table text-center">
                            <thead style="background-color: #F2F2F2 !important;">
                                <th>#</th>
                                <th>رقم الشيك </th>
                                <th>اسم البنك</th>
                                <th>المبلغ</th>
                                <th>تاريخ الشيك</th>
                                <th class="remove"></th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of ArrCheck;let index = index">
                                    <td>{{index+1}}</td>
                                    <td>{{item.checkNumber}}</td>
                                    <td>{{item.bankName}}</td>
                                    <td>{{item.amount}}</td>
                                    <td>{{item.paymentDate}}</td>
                                    <td class="removei"><button color="warn" (click)="removeCheck(index,item.amount)"
                                        mat-raised-button>{{'Shared.Remove'|translate}}</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /Table Trasfer -->
                    <div class="outerBorder shadow_5" *ngIf="this.ArrTransfer.length>0">
                        <p class="text-muted fs-5 fw-bold py-2">Table Of Trasfer </p>
                        <table class="table text-center">
                            <thead style="background-color: #F2F2F2 !important;">
                                <th>#</th>
                                <th>رقم التحويل</th>
                                <th>اسم البنك </th>
                                <th> مبلغ التحويل</th>
                                <th>التاريخ </th>
                                <th class="remove"></th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of ArrTransfer;let index = index">
                                    <td>{{index+1}}</td>
                                    <td>{{item.transferNumber}}</td>
                                    <td>{{item.bankName}}</td>
                                    <td>{{item.amount}}</td>
                                    <td>{{item.paymentDate}}</td>
                                    <td class="removeii"><button color="warn" (click)="removeTrasfer(index,item.amount)"
                                        mat-raised-button>{{'Shared.Remove'|translate}}</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /Table Honesty -->
                    <div class="outerBorder shadow_5" *ngIf="this.ArrHonsty.length>0">
                        <p class="text-muted fs-5 fw-bold py-2">Table Of Secret </p>
                        <table class="table text-center">
                            <thead style="background-color: #F2F2F2 !important;">
                                <th>#</th>
                                <th>اسم العميل</th>
                                <th>المبلغ</th>
                                <th class="removeiii"></th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of ArrHonsty;let index = index">
                                    <td>{{index+1}}</td>
                                    <td>{{item.policyId}}</td>
                                    <td>{{item.amount}}</td>
                                    <td class="removeiii"><button color="warn" (click)="removeHonesty(index,item.amount)"
                                        mat-raised-button>{{'Shared.Remove'|translate}}</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    

                    <!-- Final Save Button -->
                    <!-- <div class="row">
                    <div class="col-md-6 py-2">
                        <button mat-raised-button color="primary" class="w-50">Save <i class="fa-regular fa-floppy-disk"></i></button>
                    </div>
                </div> -->
                </div>
            </div>
            <div class="row">
                <!-- Payed Money-->
                 <div class="col-md-12">
                    <table class="table table-striped mt-2">
                        <tbody>
                            <tr>    
                                <th class="w-25 py-2"><span class="main_color">Payed Money</span></th>
                                <td class="w-75 py-2"><span class="main_color">{{this.PayedMoney}}</span></td>
                            </tr>
                        </tbody>
                    </table>
                 </div>
                <div class="col-md-4">
                    <button [disabled]="this.isSubmitted" *ngIf="this.PayedMoney == this.TotalMony&&this.PayedMoney != 0" (click)="AddPayment()" class="w-50 btn search"><span *ngIf="this.isSubmitted"><i class="fa-4 fa-solid fa-fan fa-spin"></i></span>
                        <span *ngIf="!this.isSubmitted">Save <i class="fa-regular fa-floppy-disk"></i></span> 
                    </button>
                    <button  (click)="NewPayment()" id="NewPay" style="display: none;" class="w-50 btn search">New Payment</button>
                </div>
            </div>
            
    </div>
</div>
    <!---------------------------------------  Payment History  --------------------------->
    <!-- <div class="modal fade" id="PaymentHistory" tabindex="-1" aria-labelledby="PaymentHistory" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">  
                    <h1 class="modal-title fs-5" id="PaymentHistory">Payment History </h1>
                    <button id="closeModal" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="outerItem">
                    <div class="container">
                        <div class="row outerBorder shadow_5">
                            <div class="col-md-6">
                                <table class="table table-striped table-bordered text-center">
                                    <tbody>
                                        <tr>
                                            <th class="w-30 py-3">Claim code</th>
                                            <td class="w-60 py-3">{{ClaimsHistory?.claim.code}}</td>
                                        </tr>
                                        <tr>
                                            <th class="w-30 py-2">Date Of Entry Of Claim</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.dateOfEntryOfClaim|date:'dd-MM-YYYY'}}</td>
                                        </tr>
                                        <tr>
                                            <th class="w-30 py-2">Payment Date</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.paymentDate|date:'dd-MM-YYYY'}}</td>
                                        </tr>
                                        
                                        <tr>
                                            <th class="w-30 py-2">Date Of Receipt</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.dateOfReceiptOfTheClaim|date:'dd-MM-YYYY'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <table class="table table-striped table-bordered text-center">
                                    <tbody>
                                        
                                        
                                        <tr>
                                            <th class="w-30 py-3">Gross Amount</th>
                                            <td class="w-60 py-3">{{ClaimsHistory?.claim.grossAmount}}</td>
                                        </tr>
                                        <tr>
                                            <th class="w-30 py-2">Discount</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.discount}}</td>
                                        </tr>
                                        <tr>
                                            <th class="w-30 py-2">Net Amount</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.netAmount}}</td>
                                        </tr>
                                        <tr>
                                            <th class="w-30 py-2">Excel Name</th>
                                            <td class="w-60 py-2">{{ClaimsHistory?.claim.excelName}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            
                        </div>
                    </div>
                    <div class="outerBorder shadow_5 mt-3">
                        <p class="text-danger fs-4 mx-2">Payment History</p>
                        <table class="table text-center table-hover mt-3">
                            <thead style="background-color: #F2F2F2 !important;">
                                <th>#</th>
                                <th>Created At</th>
                                <th>Money</th>
                                <th>Is Payed</th>
                                <th>paymentDate</th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of ClaimsHistory?.collections;let index = index" (click)="GetCollectionPaymentWays(item.id)" >
                                    <td>{{index+1}}</td>
                                    <td>{{item.createdAt|date:'dd-MM-YYYY'}}</td>
                                    <td>{{item.premium}}</td>
                                    <td>{{item.isPayed}}</td>
                                    <td>
                                        <span *ngIf="item.isPayed==true">{{item.paymentDate|date:'dd-MM-YYYY'}}</span>
                                        <span *ngIf="item.isPayed==false">_</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="loading" *ngIf="HistoryLoading">
                        <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
                    </div>
                </div>
                <div id="CollectionPayementWays" style="display: none;"> 
                    <hr class="my-4" style="width: 80%;margin: auto;">
                    <div class="container">
                        <div class="row outerItem">
                            <div class="col-md-6" *ngIf="CollectionPaymentWays.bankTransferPayment!=''">
                                <div class="shadow_5 py-2" style="border-radius:0.5rem;">
                                    <p class="text-muted fs-6 fw-bold px-3">Bank Transfer <i class="fa-solid fa-square-poll-vertical"></i></p>
                                    <table class="table text-center table-responsive">
                                        <thead class="tableHead">
                                            <th class="py-2">Transfer No.</th>
                                            <th class="py-2">Amount</th>
                                            <th class="py-2">Bank</th>
                                            <th class="py-2">Date</th>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of CollectionPaymentWays.bankTransferPayment">
                                                <td class="align-middle">{{item.transferNumber}}</td>
                                                <td class="align-middle">{{item.amount}}</td>
                                                <td class="align-middle">{{item.bankName}}</td>
                                                <td class="align-middle">{{item.paymentDate|date:'dd-MM-YYYY'}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="CollectionPaymentWays.checkPayment!=''">
                                <div class="shadow_5 py-2" style="border-radius:0.5rem;" >
                                    <p class="text-muted fs-6 fw-bold px-2">Check Payment <i class="fa-solid fa-square-poll-vertical"></i></p>
                                    <table class="table text-center table-responsive">
                                        <thead class="tableHead">
                                            <th class="py-2">Check No.</th>
                                            <th class="py-2">Amount</th>
                                            <th class="py-2">Bank</th>
                                            <th class="py-2">Date</th>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of CollectionPaymentWays.checkPayment">
                                                <td class="align-middle">{{item.checkNumber}}</td>
                                                <td class="align-middle">{{item.amount}}</td>
                                                <td class="align-middle">{{item.bankName}}</td>
                                                <td class="align-middle">{{item.paymentDate|date:'dd-MM-YYYY'}}</td>
                                            </tr>
                                        </tbody>
                                    </table> 
                                </div>
                            </div>
                            <div class="col-md-6 mt-1" *ngIf="CollectionPaymentWays.secretariat!=''">
                                <div class="shadow_5 py-2 mx-1" style="border-radius:0.5rem;">
                                    <p class="text-muted fs-6 fw-bold px-2">Secret Table <i class="fa-solid fa-square-poll-vertical"></i></p>
                                    <table class="table text-center table-responsive">
                                        <thead class="tableHead">
                                            <th class="py-2">Insured</th>
                                            <th class="py-2">Price</th>
                                            <th class="py-2">Date</th>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of CollectionPaymentWays.secretariat">
                                                <td class="align-middle">{{item.insuredName}}</td>
                                                <td class="align-middle">{{item.amount}}</td>
                                                <td class="align-middle">{{item.paymentDateTime|date:'dd-MM-YYYY'}}</td>
                                            </tr>
                                        </tbody>
                                    </table> 
                                </div>
                            </div>
                            <div id="loading" *ngIf="loadingPaymentWays">
                                <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
                            </div>
                            <div class="alert alert-info my-4" style="width: 70%;margin: auto;" *ngIf="CollectionPaymentWays.bankTransferPayment==''&&
                            CollectionPaymentWays.checkPayment==''&&CollectionPaymentWays.secretariat==''">
                                <p class="text-center fs-6 fw-bold">No Payment Ways Yet </p>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <div class="py-3">
                    <button type="button" mat-stroked-button color="warn" data-bs-dismiss="modal" class="mx-3">Close</button>
                </div>
    
               
            </div>
        </div>
    </div> -->


    <div class="overlayPortflioCollections" (click)="closeHistory()">
        <div class="closePortflioCollections" (click)="$event.stopPropagation()">
            <div class="d-flex justify-content-between delet-details">
                <h2>Brokerage Collections</h2>
                <div class="d-flex align-items-center justify-content-center"><i class="fa-solid fa-xmark text-danger text-center" (click)="closeHistory()" style="cursor: pointer;"></i></div>
            </div>
           <hr class="custom-hr w-100">
           <div class="outerItem">
            <!-- first Table -->
            <div class="container">
                <div class="row outerBorder shadow_5">
                    <div class="col-md-6">
                        <table class="table table-striped table-bordered text-center">
                            <tbody>
                                <tr>
                                    <th class="w-30 py-3">Claim code</th>
                                    <td class="w-60 py-3">{{ClaimsHistory?.claim.code}}</td>
                                </tr>
                                <tr>
                                    <th class="w-30 py-2">Date Of Entry Of Claim</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.dateOfEntryOfClaim|date:'dd-MM-YYYY'}}</td>
                                </tr>
                                <tr>
                                    <th class="w-30 py-2">Payment Date</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.paymentDate|date:'dd-MM-YYYY'}}</td>
                                </tr>
                                
                                <tr>
                                    <th class="w-30 py-2">Date Of Receipt</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.dateOfReceiptOfTheClaim|date:'dd-MM-YYYY'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-striped table-bordered text-center">
                            <tbody>
                                
                                
                                <tr>
                                    <th class="w-30 py-3">Gross Amount</th>
                                    <td class="w-60 py-3">{{ClaimsHistory?.claim.grossAmount}}</td>
                                </tr>
                                <tr>
                                    <th class="w-30 py-2">Discount</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.discount}}</td>
                                </tr>
                                <tr>
                                    <th class="w-30 py-2">Net Amount</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.netAmount}}</td>
                                </tr>
                                <tr>
                                    <th class="w-30 py-2">Excel Name</th>
                                    <td class="w-60 py-2">{{ClaimsHistory?.claim.excelName}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    
                </div>
            </div>
            <!-- Socend Table -->
            <div class="outerBorder shadow_5 mt-3">
                <p class="text-danger fs-4 mx-2">Payment History</p>
                <table class="table text-center table-hover mt-3">
                    <thead style="background-color: #F2F2F2 !important;">
                        <th>#</th>
                        <th>Created At</th>
                        <th>Money</th>
                        <th>Is Payed</th>
                        <th>paymentDate</th>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of ClaimsHistory?.collections;let index = index" (click)="GetCollectionPaymentWays(item.id)" >
                            <td>{{index+1}}</td>
                            <td>{{item.createdAt|date:'dd-MM-YYYY'}}</td>
                            <td>{{item.premium}}</td>
                            <td>{{item.isPayed}}</td>
                            <td>
                                <span *ngIf="item.isPayed==true">{{item.paymentDate|date:'dd-MM-YYYY'}}</span>
                                <span *ngIf="item.isPayed==false">_</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Loading -->
            <div id="loading" *ngIf="HistoryLoading">
                <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
            </div>
        </div>
        <!-- Collection Payement Ways Table -->
        <div id="CollectionPayementWays" style="display: none;"> 
            <hr class="my-4" style="width: 80%;margin: auto;">
            <div class="container">
                <div class="row outerItem">
                    <div class="col-md-6" *ngIf="CollectionPaymentWays.bankTransferPayment!=''">
                        <div class="shadow_5 py-2" style="border-radius:0.5rem;">
                            <p class="text-muted fs-6 fw-bold px-3">Bank Transfer <i class="fa-solid fa-square-poll-vertical"></i></p>
                            <table class="table text-center table-responsive">
                                <thead class="tableHead">
                                    <th class="py-2">Transfer No.</th>
                                    <th class="py-2">Amount</th>
                                    <th class="py-2">Bank</th>
                                    <th class="py-2">Date</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of CollectionPaymentWays.bankTransferPayment">
                                        <td class="align-middle">{{item.transferNumber}}</td>
                                        <td class="align-middle">{{item.amount}}</td>
                                        <td class="align-middle">{{item.bankName}}</td>
                                        <td class="align-middle">{{item.paymentDate|date:'dd-MM-YYYY'}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6" *ngIf="CollectionPaymentWays.checkPayment!=''">
                        <div class="shadow_5 py-2" style="border-radius:0.5rem;" >
                            <p class="text-muted fs-6 fw-bold px-2">Check Payment <i class="fa-solid fa-square-poll-vertical"></i></p>
                            <table class="table text-center table-responsive">
                                <thead class="tableHead">
                                    <th class="py-2">Check No.</th>
                                    <th class="py-2">Amount</th>
                                    <th class="py-2">Bank</th>
                                    <th class="py-2">Date</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of CollectionPaymentWays.checkPayment">
                                        <td class="align-middle">{{item.checkNumber}}</td>
                                        <td class="align-middle">{{item.amount}}</td>
                                        <td class="align-middle">{{item.bankName}}</td>
                                        <td class="align-middle">{{item.paymentDate|date:'dd-MM-YYYY'}}</td>
                                    </tr>
                                </tbody>
                            </table> 
                        </div>
                    </div>
                    <div class="col-md-6 mt-1" *ngIf="CollectionPaymentWays.secretariat!=''">
                        <div class="shadow_5 py-2 mx-1" style="border-radius:0.5rem;">
                            <p class="text-muted fs-6 fw-bold px-2">Secret Table <i class="fa-solid fa-square-poll-vertical"></i></p>
                            <table class="table text-center table-responsive">
                                <thead class="tableHead">
                                    <th class="py-2">Insured</th>
                                    <th class="py-2">Price</th>
                                    <th class="py-2">Date</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of CollectionPaymentWays.secretariat">
                                        <td class="align-middle">{{item.insuredName}}</td>
                                        <td class="align-middle">{{item.amount}}</td>
                                        <td class="align-middle">{{item.paymentDateTime|date:'dd-MM-YYYY'}}</td>
                                    </tr>
                                </tbody>
                            </table> 
                        </div>
                    </div>
                        <!-- Loading -->
                    <div id="loading" *ngIf="loadingPaymentWays">
                        <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
                    </div>
                    <div class="alert alert-info my-4" style="width: 70%;margin: auto;" *ngIf="CollectionPaymentWays.bankTransferPayment==''&&
                    CollectionPaymentWays.checkPayment==''&&CollectionPaymentWays.secretariat==''">
                        <p class="text-center fs-6 fw-bold">No Payment Ways Yet </p>
                    </div>
                </div>
            </div>
            
        </div>     
                <div class="d-flex justify-content-cnter align-items-center py-4">
                  <!-- <button [disabled]="this.AddBankForm.status=='INVALID'||this.isClicked" class="btn _cancel w-50 mx-1" (click)="AddBank()">
                    <span *ngIf="!this.isClicked">Save</span>
                    <span *ngIf="this.isClicked"><i class="fa-solid fa-fan fa-spin"></i></span>
                  </button> -->
                  <button class="btn _delete w-25 mx-1" (click)="closeHistory()">Cancel</button>
                 </div>
          </div>
      </div>