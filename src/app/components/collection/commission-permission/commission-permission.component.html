<div id="commission-permission">
    <div class="container">
        <div class="d-flex justify-content-between mx-5 pt-3">
            <p class="font_Coloered3 text-center my-2">Commission Permission</p>
        </div>
    <div class="outerBorder outerItem shadow_5 py-3">
    <!-------------------- Search Policy ------------------->
    <p class="text-muted fs-5 fw-bold py-2">{{'Shared.SearchHere'|translate}} :</p>
    <form [formGroup]="SearchForm">
        <div class="row">
            <div class="col-md-4">
                <mat-form-field class="w-100">
                    <mat-label>الكـود</mat-label>
                    <!-- الحافظه دي زي رقم البوليصه بس دي للحاجات ال اتعمها ابروف -->
                    <input formControlName="Code" type="text" matInput>
                    <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                            class="fa-solid fa-hashtag"></i></mat-icon>
                </mat-form-field>
            </div>
            <div class="col-md-4">
                <mat-form-field class="w-100" id="bokerField">
                    <mat-label>{{'Offer.Broker'|translate}}</mat-label>
                    <mat-select [(value)]="BrokerIdVal">
                        <mat-option value="">{{'Shared.Null'|translate}}</mat-option>
                        <mat-option *ngFor="let type of brokerCustomers"
                            [value]="type.id">{{type.name}}</mat-option>
                    </mat-select>
                    <mat-icon matIconSuffix style="color: rgba(0, 0, 0, 0.6);"><i
                            class="fa-solid fa-people-arrows"></i></mat-icon>
                </mat-form-field>
            </div>
            
            <div class="col-md-4">
                <mat-form-field class="w-100">
                    <mat-label>{{'Policy.From'|translate}}</mat-label>
                    <input formControlName="From"  matInput [matDatepicker]="picker">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-md-4">
                <mat-form-field class="w-100">
                    <mat-label>{{'Policy.To'|translate}}</mat-label>
                    <input formControlName="To" matInput [matDatepicker]="picker2">
                    <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
            </div>

            <div class="col-md-4">
                <!-- Search Now -->
                <div class="d-flex justify-content-end">
                    <button [disabled]="this.isClicked" (click)="Search()" mat-raised-button color="primary"
                        class="w-75 py-2"><span *ngIf="this.isClicked"><i
                                class="fa-4 fa-solid fa-fan fa-spin"></i></span> <span
                            *ngIf="!this.isClicked">{{'Shared.Search'|translate}} <i
                                class="fa-solid fa-magnifying-glass"></i></span></button>
                </div>
            </div>
        </div>
    </form>


    <!-------------------- Search results ------------------->

    <div style="overflow: auto;" id="SearchResults">
        <hr class="my-4" style="width: 80%;margin: auto;">
        <p class="text-muted fs-5 fw-bold py-2">{{'Shared.Searchresults'|translate}} <i
                class="fa-solid fa-square-poll-vertical"></i></p>
        <table class="table text-center table-responsive table-hover">
            <thead class="tableHead">
                <th class="py-2">رقـم الوثيقه</th>
                <th class="py-2">Broker Name</th>
                <th class="py-2">اجمالي العموله</th>
                <th class="py-2">تاريخ الإستحقاق</th>
                <th class="py-2">تحديد</th>
            </thead>
            <tbody>

                <tr *ngFor="let Policy of AllPolices;let index= index">
                    <td class="align-middle">{{Policy.a}}</td>
                    <td class="align-middle">{{Policy.c}}</td>
                    <td class="align-middle">{{Policy.g}}</td>
                    <td class="align-middle">{{Policy.h}}</td>
                    <td class="align-middle">
                        <section class="example-section">
                            <mat-checkbox (change)="getCheckedValues($event.checked , Policy.g,index)"
                                class="example-margin"></mat-checkbox>
                        </section>
                    </td>

                </tr>
            </tbody>

        </table>
        <div class="row">
            <!-- total Money-->
            <div class="col-md-4">
                <table class="table table-striped table-bordered text-center mt-2">
                    <tbody>
                        <tr>
                            <th class="w-30 py-2">Total Money</th>
                            <td class="w-60 py-2">{{this.TotalMony}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <button mat-raised-button color="primary" (click)="SaveCommissionPermission()" class="mx-2">حفـظ <i class="fa-regular fa-floppy-disk"></i></button>
                <button mat-raised-button color="primary" (click)="PrintCommissionPermission()" id="PrintButton" style="display:none;">
                    <a target="_blank" [routerLink]="['/Claim',12]">طباعه اذن الصرف</a>
                </button>
            </div>
            
        </div>
        <!-- Loading -->
        <div id="loading" *ngIf="isClicked">
            <app-spinner class="d-flex justify-content-center m-auto"></app-spinner>
        </div>
    </div>


</div>

    </div>
</div>